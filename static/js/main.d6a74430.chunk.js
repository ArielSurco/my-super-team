(this["webpackJsonpreact-superheroes-api"]=this["webpackJsonpreact-superheroes-api"]||[]).push([[0],{206:function(e,t,n){},227:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(71),r=n.n(s),o=(n(206),n(27)),i=n(18),l=n(25),u=n.n(l),d=n(48),j=n(14),h=n(92),m=n.n(h),b=function(e,t){var n=c.a.useState(t),a=Object(j.a)(n,2),s=a[0],r=a[1];c.a.useEffect((function(){var n,a=localStorage.getItem(e);a?n=JSON.parse(a):(localStorage.setItem(e,JSON.stringify(t)),n=t),r(n)}),[]);return[s,function(t){var n=JSON.stringify(t);localStorage.setItem(e,n),r(t)}]},f=n(67),p=n(1),x=c.a.createContext(),O=function(e){var t=e.children,n=b("team",[]),a=Object(j.a)(n,2),s=a[0],r=a[1],o=c.a.useState([]),i=Object(j.a)(o,2),l=i[0],u=i[1],d=function(e){var t=e.filter((function(e){return"good"===e.biography.alignment})),n=e.filter((function(e){return"bad"===e.biography.alignment})),a=e.length<=6&&t.length<=3&&n.length<=3;return e.length>6?h("The team is full","error"):t.length>3?h("Limit of heroes with good orientation reached","error"):n.length>3&&h("Limit of heroes with bad orientation reached","error"),a},h=function(e,t){var n=Object(f.a)(l);n.push({message:e,type:t}),u(n)};return Object(p.jsx)(x.Provider,{value:{team:s,canBeAdded:d,addHero:function(e){var t=Object(f.a)(s);t.push(e),d(t)&&(r(t),h("Hero added successfully","success"))},deleteHero:function(e){var t=s.findIndex((function(t){return t.id===e})),n=Object(f.a)(s);n.splice(t,1),r(n)},alerts:l,addAlert:h,removeAlert:function(e){var t=l.filter((function(t){return t.message!==e}));u(t)}},children:t})},g=function(){var e=Object(a.useContext)(x).addAlert,t=localStorage.getItem("session"),n=t?JSON.parse(t):{token:"",isAuth:!1},c=b("session",n),s=Object(j.a)(c,2),r=s[0],o=s[1],i=function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.post("http://challenge-react.alkemy.org/",n).then((function(e){return e.data}));case 3:(a=t.sent).error||(e("Successful login","success"),o({token:a.token,isAuth:!0}),window.location.pathname="/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e("Wrong email or password","error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return{session:r,login:i,logout:function(){o({token:"",isAuth:!1})}}},v=(n(227),function(){var e=g(),t=e.session,n=e.logout;return Object(p.jsx)("nav",{className:"navbar navbar-light navbar-expand-md bg-light fixed-top shadow p-3 mb-5 bg-white rounded",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)(o.b,{className:"navbar-brand logo",to:"/",children:"MST"}),Object(p.jsx)("ul",{className:"navbar-nav ms-3",children:t.isAuth&&Object(p.jsx)("li",{onClick:n,children:Object(p.jsx)(o.b,{className:"nav-link",to:"/login",children:"Log out"})})})]})})}),w=(n(232),function(e){switch(e){case"success":return"bg-success";case"error":return"bg-danger";default:return null}}),N=function(e){var t=e.message,n=e.type,c=e.removeAlert;return Object(a.useLayoutEffect)((function(){setTimeout((function(){c(t)}),1e3)})),Object(p.jsxs)("div",{className:"alert d-flex align-items-center justify-content-between fixed-bottom m-0 ".concat(w(n)),children:[Object(p.jsx)("p",{className:"alert__text fs-3 fw-normal",children:t}),Object(p.jsx)("button",{className:"alert__btn",onClick:function(){return c(t)},children:Object(p.jsx)("i",{className:"btn__clear"})})]})},y=(n(233),function(e){var t=Object(a.useContext)(x),n=t.alerts,c=t.removeAlert;return console.log(n),Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(v,{}),e.children,0!==n.length&&n.map((function(e){return Object(p.jsx)(N,{message:e.message,type:e.type,removeAlert:c},e.message)}))]})}),k=n(377),S=n(378),I=n(382),A=n(189),C=n(190),E=n(196),_=function(e){var t=e.toLowerCase();return e.charAt(0).toUpperCase()+t.slice(1)},H=function(e){var t=e.labels,n=e.values,a=e.width,c=e.height,s=e.className,r=t.map((function(e,t){return{label:_(e),value:parseInt(n[t])}}));return Object(p.jsx)(k.a,{width:a,height:c,className:s,children:Object(p.jsxs)(S.a,{cx:"50%",cy:"50%",outerRadius:"85%",data:r,children:[Object(p.jsx)(I.a,{}),Object(p.jsx)(A.a,{dataKey:"label",fontWeight:"bold"}),Object(p.jsx)(C.a,{}),Object(p.jsx)(E.a,{dataKey:"value",stroke:"#8884e8",fill:"#8884d8",fillOpacity:.6,dot:!0})]})})},B=(n(367),function(e){var t=c.a.useContext(x),n=t.deleteHero,a=t.addHero,s=e.heroInfo,r=s.id,i=s.name,l=s.powerstats,u=s.image,d=Object.keys(l),j=Object.values(l);return Object(p.jsx)("div",{className:"col hero-container",children:Object(p.jsx)("div",{className:"hero-card shadow bg-light",children:Object(p.jsxs)("div",{className:"flip-card w-100",children:[Object(p.jsxs)("div",{className:"flip-card__front",children:[Object(p.jsx)("img",{className:"front__image",src:u.url,alt:i}),Object(p.jsx)("h2",{className:"hero-name fw-normal",children:i})]}),Object(p.jsxs)("div",{className:"flip-card__back",children:[Object(p.jsx)("h2",{className:"text-center mt-3",children:i}),Object(p.jsx)(H,{className:"mx-auto mt-5",width:"95%",height:"50%",labels:d,values:j}),Object(p.jsxs)("div",{className:"button-group row d-flex justify-content-around",children:[Object(p.jsx)(o.b,{to:"/search/".concat(r),className:"btn btn-primary col-4 fs-4",children:"Details"}),e.isSearching?Object(p.jsx)("button",{className:"btn btn-success col-4 fs-4",onClick:function(){return a(e.heroInfo)},children:"Add"}):Object(p.jsx)("button",{className:"btn btn-danger col-4 fs-4",onClick:function(){return n(r)},children:"Remove"})]})]})]})})})}),F=(n(368),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e.map((function(e){return n(e[t])}))}),T=function(e){return e.reduce((function(e,t){return e+t}))/e.length},L=function(e){var t=e.filter((function(e){return e.includes("kg")})),n=e.filter((function(e){return e.includes("cm")}));return t.length>0?parseInt(t):n.length>0?parseInt(n):void 0},V=function(){var e=c.a.useContext(x).team,t=F(e,"powerstats"),n=0!==e.length?Object.keys(t[0]):[],a=n.map((function(e){return t.map((function(t){return parseInt(t[e])})).reduce((function(e,t){return e+t}))})),s=a.findIndex((function(e){return e===Math.max.apply(Math,Object(f.a)(a))})),r=F(F(e,"appearance"),"weight",L),o=F(F(e,"appearance"),"height",L);return Object(p.jsx)("div",{className:"team-info-container col-12 col-xl-10 col-xxl-9 accordion shadow justify-self-center",id:"teamInfoAccordion",children:Object(p.jsxs)("div",{className:"accordion-item ",children:[Object(p.jsx)("header",{className:"accordion-header",id:"headerTeamInfo",children:Object(p.jsx)("button",{className:"accordion-button collapsed fs-3 fw-bold fst-italic","data-bs-toggle":"collapse","data-bs-target":"#teamInfo","aria-expanded":"false","aria-controls":"teamInfo",children:"Team Information"})}),Object(p.jsx)("div",{className:"accordion-collapse collapse",id:"teamInfo","aria-labelledby":"headerTeamInfo","data-bs-parent":"#teamInfoAccordion",children:Object(p.jsx)("div",{className:"accordion-body",children:Object(p.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsxs)("p",{className:"fs-3 fw-bold",children:["Team Category:",Object(p.jsx)("span",{className:"fw-normal text-capitalize",children:" ".concat(0!==e.length?n[s]:"")})]})}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("header",{className:"fs-3 fw-bold",children:"Total Powerstats"}),Object(p.jsx)("div",{className:"container-fluid d-flex justify-content-around my-3 row row-cols-1 row-cols-sm-2 row-cols-lg-3",children:n.map((function(e,t){return Object(p.jsx)("div",{className:"info-value-item pt-3 px-4",children:Object(p.jsxs)("p",{className:"fs-4",children:[Object(p.jsxs)("span",{className:"fw-bold",children:[e,": "]}),a[t]]})},e)}))})]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("header",{className:"fs-3 fw-bold",children:"Averages"}),Object(p.jsxs)("div",{className:"container d-flex justify-content-around row row-cols-1 row-cols-sm-2 row-cols-lg-3",children:[Object(p.jsx)("div",{className:"info-value-item pt-3 px-4",children:Object(p.jsxs)("p",{className:"fs-4",children:[Object(p.jsx)("span",{className:"fw-bold",children:"Weight: "}),0!==e.length?T(r).toFixed():0,"kg"]})}),Object(p.jsx)("div",{className:"info-value-item pt-3 px-4",children:Object(p.jsxs)("p",{className:"fs-4",children:[Object(p.jsx)("span",{className:"fw-bold",children:"Height: "}),0!==e.length?T(o).toFixed():0,"cm"]})})]})]})]})})})]})})},W=(n(369),function(){var e=window.innerWidth<576,t=c.a.useContext(x),n=t.team,a=t.alerts,s=t.removeAlert;return c.a.useEffect((function(){a.forEach((function(e){s(e.message)}))})),Object(p.jsxs)("div",{className:"container-fluid home",children:[Object(p.jsx)(V,{}),0!==n.length&&n.length<6&&Object(p.jsxs)("p",{className:"fs-3 mt-3",children:[Object(p.jsx)(o.b,{to:"/search",className:"text-decoration-none",children:"Search"})," more heroes to add"]}),0!==n.length?Object(p.jsx)("div",{className:"mt-5 row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 justify-content-".concat(e?"center":"start"),children:n.map((function(e){return Object(p.jsx)(B,{heroInfo:e},e.name)}))}):Object(p.jsxs)("p",{className:"fs-3 mt-3",children:["Your team is empty, ",Object(p.jsx)(o.b,{to:"/search",className:"text-decoration-none",children:"search"})," a hero to add"]})]})}),J=n(100),P=(n(370),function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password||(t.password="Required"),t}),R=function(){var e=g().login,t=Object(J.a)({initialValues:{email:"",password:""},validate:P,onSubmit:function(t){e(t)}});return Object(p.jsx)("div",{className:"login-form-container container d-flex justify-content-center align-items-center",children:Object(p.jsx)("form",{action:"",onSubmit:t.handleSubmit,className:"login-form shadow-lg p-3 mb-5 bg-light rounded",children:Object(p.jsxs)("div",{className:"form-row fs-1",children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(p.jsx)("input",{type:"text",className:"form-control fs-2 ".concat(t.touched.email&&t.errors.email?"is-invalid":null),name:"email",id:"email",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.email,placeholder:"Email"}),Object(p.jsx)("div",{className:"invalid-feedback",children:t.errors.email})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"form-control fs-2 ".concat(t.touched.password&&t.errors.password?"is-invalid":null),name:"password",id:"password",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.password,placeholder:"Password"}),Object(p.jsx)("div",{className:"invalid-feedback",children:t.errors.password})]}),Object(p.jsx)("button",{type:"submit",className:"w-100 mt-3 btn btn-primary fs-1 rounded",children:"Login"})]})})})},M=function(){return g().session.isAuth?Object(p.jsx)(i.a,{to:"/"}):Object(p.jsx)(R,{})},Z=(n(371),function(e){var t=e.searchHero,n=Object(J.a)({initialValues:{searchValue:""},onSubmit:function(e){t(e.searchValue)}});return Object(p.jsx)("form",{action:"",onSubmit:n.handleSubmit,children:Object(p.jsxs)("div",{className:"form-group d-flex justify-content-center",children:[Object(p.jsx)("input",{type:"text",className:"search-input d-inline-block form-control fs-2",id:"searchValue",name:"searchValue",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.searchValue,placeholder:"Search"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary search-button",children:Object(p.jsx)("i",{className:"search-icon"})})]})})}),q=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(t+n)).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.error(new Error(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),K=(n(372),function(){var e=window.innerWidth<576,t=c.a.useState([]),n=Object(j.a)(t,2),a=n[0],s=n[1],r=c.a.useState(!0),i=Object(j.a)(r,2),l=i[0],h=i[1],m=c.a.useState(null),b=Object(j.a)(m,2),f=b[0],x=b[1];return c.a.useEffect((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("https://www.superheroapi.com/api.php/1972691609555893/search/",f).then((function(e){return e.data}));case 3:(t=e.sent).error||(s(t.results),h(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(new Error(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[f]),Object(p.jsxs)("div",{className:"container search-route",children:[Object(p.jsx)(Z,{searchHero:function(e){x(e)}}),Object(p.jsx)(o.b,{to:"/",className:"btn btn-primary fs-2 mt-3",children:"Check your team"}),Object(p.jsx)("div",{className:"mt-3 row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 justify-content-".concat(e?"center":"start"),children:!l&&a.map((function(e){return Object(p.jsx)(B,{isSearching:!0,heroInfo:e},e.id)}))})]})}),z=(n(373),function(e){var t=[];return e.forEach((function(n,a){a!==e.length-1?t.push(n+", "):t.push(n)})),t}),D=function(){var e=Object(i.g)().id,t=Object(a.useState)({}),n=Object(j.a)(t,2),c=n[0],s=c.name,r=c.biography,o=c.appearance,l=c.work,h=c.image,m=n[1],b=Object(a.useState)(!0),f=Object(j.a)(b,2),x=f[0],O=f[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://www.superheroapi.com/api.php/","1972691609555893",t.next=5,q("".concat("https://www.superheroapi.com/api.php/1972691609555893","/"),e);case 5:n=t.sent,m(n.data),O(!1),console.log(n.data),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(new Error(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(p.jsx)(a.Fragment,{children:x?Object(p.jsx)("p",{children:"Loading..."}):Object(p.jsx)("div",{className:"card hero-card shadow mt-5 w-75 m-auto",children:Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)("img",{src:h.url,alt:s,className:"hero-image img-fluid rounded-start"})}),Object(p.jsx)("div",{className:"col-md-8",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h1",{className:"card-title text-center",children:s}),Object(p.jsxs)("ul",{className:"information list-group list-group-flush",children:[Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Fullname:"})," ",r["full-name"]," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Aliases:"})," ",z(r.aliases)," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Workplace:"})," ",l.base," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Weight:"})," ",o.weight[1]," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Height:"})," ",o.height[1]," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Hair color:"})," ",o["hair-color"]," "]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("strong",{children:"Eye color:"})," ",o["eye-color"]," "]})]})]})})]})})})},U=function(){return Object(p.jsx)("p",{className:"fw-bold fs-1 mt-3 mx-5",children:"Error 404: Not Found"})},Y=n(197),$=function(e){return g().session.isAuth?Object(p.jsx)(i.b,Object(Y.a)({},e)):Object(p.jsx)(i.a,{to:"/login"})},G=function(){return Object(p.jsx)(O,{children:Object(p.jsx)(o.a,{children:Object(p.jsx)(y,{children:Object(p.jsxs)(i.d,{children:[Object(p.jsx)($,{path:"/search/:id",component:D}),Object(p.jsx)($,{path:"/search",component:K}),Object(p.jsx)(i.b,{path:"/login",component:M}),Object(p.jsx)($,{exact:!0,path:"/",component:W}),Object(p.jsx)(i.b,{component:U})]})})})})};n(374);r.a.render(Object(p.jsx)(G,{}),document.getElementById("root"))}},[[375,1,2]]]);
//# sourceMappingURL=main.d6a74430.chunk.js.map